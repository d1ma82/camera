cmake_minimum_required(VERSION 3.21 FATAL_ERROR)

add_compile_definitions(DEBUG)
#set(OpenCV_DIR "D:/OpenCV/android_4_5_4/install/sdk/native/jni")
#cmake_path(CONVERT $ENV{GLM} TO_CMAKE_PATH_LIST GLM)
cmake_path(CONVERT $ENV{ANDROID_NDK} TO_CMAKE_PATH_LIST ANDROID_NDK)
set(ANDROID_ABI "arm64-v8a")
#set(ANDROID_ABI "x86_64")
set(ANDROID_PLATFORM "24")
set(CMAKE_TOOLCHAIN_FILE "${ANDROID_NDK}/build/cmake/android.toolchain.cmake")


project(camera-lib)
file(GLOB SRC "./src/*.cpp")

add_library(${PROJECT_NAME} SHARED ${SRC})

set_target_properties(${PROJECT_NAME} PROPERTIES 
					  LIBRARY_OUTPUT_DIRECTORY "../../jniLibs/${ANDROID_ABI}")

target_include_directories(${PROJECT_NAME} 
    PRIVATE "./include"
  #  PRIVATE ${GLM}
  #  PRIVATE "${OpenCV_DIR}/include"
)

#find_package(OpenCV REQUIRED core imgproc)
#message(STATUS "OpenCV libs: ${OpenCV_LIBS}")
#target_link_libraries(${PROJECT_NAME} ${OpenCV_LIBS})

find_library(camera-lib camera2ndk)
find_library(media-lib mediandk)
find_library(android-lib android)
find_library(gl-lib GLESv3)
target_link_libraries(${PROJECT_NAME} ${camera-lib} ${android-lib} ${media-lib} ${gl-lib} log) 

